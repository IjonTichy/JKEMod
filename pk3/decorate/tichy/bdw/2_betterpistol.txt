
actor " B-Pistol ": DoomWeapon
{
    Weapon.SelectionOrder 1900
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 4
    Weapon.AmmoGive 20
    Weapon.AmmoType1 "Clip"
    Weapon.AmmoType2 "Clip"

    Weapon.SlotNumber 2
    Weapon.SisterWeapon "Power Pistol"

    +WEAPON.WIMPY_WEAPON
    +NOAUTOFIRE

    Inventory.PickupMessage "$BDW_PK_PISTOL"
    Obituary "$BDW_MP_PISTOL"
    States
    {
      Ready:
        PKPI A 1 A_WeaponReady
        Loop
      Deselect:
        PKPI A 1 A_Lower
        Loop
      Select:
        PKPI A 1 A_Raise
        Loop
      Fire:
        PKPI B    0 A_GunFlash
        PKPI B    0 A_PlaySound("betterdoomweapons/pistolfire", CHAN_WEAPON)
        PKPI B    1 A_FireBullets(1.5, 1, -1, 5, "BulletPuff")
        PKPI CEED 1
        PKPI CB   1 A_WeaponReady
        Goto Ready

      AltFire:
        PKPI B 0 A_GunFlash
        PKPI B 0 A_PlaySound("betterdoomweapons/pistolaltfire", CHAN_WEAPON)
        PKPI B 0 A_FireBullets(5, 3, 4, 5, "BulletPuff")
        PKPI C 1
        PKPI E 12
        PKPI D 3
        PKPI C 2
        PKPI B 1
        PKPI B 0 A_ReFire
        Goto Ready
      Flash:
        PKPF A 1 Bright A_Light1
        goto LightDone

      Spawn:
        PIST A -1
        Stop
    }
}


actor "Power Pistol": DoomWeapon
{
    Weapon.SelectionOrder 1900
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 4
    Weapon.AmmoGive 20
    Weapon.AmmoType1 "Clip"
    Weapon.AmmoType2 "Clip"

    Weapon.SisterWeapon " B-Pistol "

    +WEAPON.WIMPY_WEAPON
    +NOAUTOFIRE
    +POWERED_UP

    Inventory.PickupMessage "$BDW_PK_PISTOL"
    Obituary "$BDW_MP_PISTOL_POWER"
    States
    {
      Ready:
        PKPI A 1 A_WeaponReady
        Loop
      Deselect:
        PKPI A 1 A_Lower
        Loop
      Select:
        PKPI A 1 A_Raise
        Loop
      Fire:
        PKPI B    0 A_GunFlash
        PKPI B    0 A_PlaySound("betterdoomweapons/pistolfire", CHAN_WEAPON)
        PKPI B    1 A_FireBullets(0.5, 0.5, -1, 9, "ExplosivePistolBulletPuff")
        PKPI CEED 1
        PKPI CB   1 A_WeaponReady
        Goto Ready

      AltFire:
        PKPI B 0 A_GunFlash
        PKPI B 0 A_PlaySound("betterdoomweapons/pistolaltfire", CHAN_WEAPON)
        PKPI B 0 A_FireBullets(3, 3, 4, 9, "ExplosivePistolBulletPuff")
        PKPI C 1
        PKPI E 8
        PKPI D 3
        PKPI C 2
        PKPI B 1
        PKPI B 0 A_ReFire
        Goto Ready
      Flash:
        PKPF A 1 Bright A_Light1
        goto LightDone

      Spawn:
        PIST A -1
        Stop
    }
}


actor ExplosivePistolBulletPuff: BulletPuff
{
    +PUFFONACTORS
    +PUFFGETSOWNER
    Vspeed 0
    Decal BulletScorch
    RenderStyle Add
    Scale 0.5
    Obituary "$OB_MPPISTOL_POWERED"
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0
        MISL B 3 bright A_Explode(48,96, 0)

      Death:
        MISL C 6 bright
        MISL D 4 bright
        stop
    }
}