actor " Chaingun ": DoomWeapon
{
    Weapon.SelectionOrder 700
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 1
    Weapon.AmmoGive1 80
    Weapon.AmmoType1 "Clip"
    Weapon.AmmoType2 "Clip"

    Weapon.SisterWeapon "Power Chaingun"

    Inventory.PickupMessage "$BDW_PK_CHAINGUN"
    Obituary "$BDW_MP_CHAINGUN"
    States
    {
      Ready:
        PKCG A 1 A_WeaponReady
        Loop
      Deselect:
        PKCG A 1 A_Lower
        Loop
      Select:
        PKCG A 1 A_Raise
        Loop
      Fire:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire", CHAN_WEAPON)
        PKCG A 0 A_GunFlash
        PKCG A 0 A_Recoil(0.3)
        PKCG A 1 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG BD 1
        PKCG A 1 A_Refire
        PKCG B 2 A_Weaponready
        PKCG C 3 A_Weaponready
        PKCG D 4 A_Weaponready
        Goto Ready
/*
      AltFire:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire", CHAN_WEAPON)
        PKCG A 0 A_GunFlash
        PKCG A 1 A_FireBullets(6, 6, 3, 8, "BulletPuff")
        PKCG BCDD 1
        PKCG A 1 A_Refire
        PKCG B 2 A_Weaponready
        PKCG C 3 A_Weaponready
        PKCG D 4 A_Weaponready
        Goto Ready
*/

      AltFire:

      AltUp0:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A 2
        PKCG B 4
        PKCG C 4
        PKCG D 4
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp1")
        goto Ready

      AltUp1:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A 2
        PKCG B 4
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp2")
        goto AltUp0

      AltUp2:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A 1
        PKCG B 3
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown1")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp3")
        goto AltUp1

      AltUp3:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A 1
        PKCG B 3
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown2")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp4")
        goto AltUp2

      AltUp4:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG B 2
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown3")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp5")
        goto AltUp3

      AltUp5:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG B 2
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown4")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp6")
        goto AltUp4

      AltUp6:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 1 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCF F 1
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown5")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp7")
        goto AltUp5

      AltUp7:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 1 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown6")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp8")
        goto AltUp6

      AltUp8:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF F 1 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 1 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG D 0 A_JumpIfNoAmmo("AltDown7")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp9")
        goto AltUp7

      AltUp9:
        PKCG A  0
        PKCG AA 0 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A  0 A_Recoil(0.6)
        PKCF F  1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG CC 0 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A  0 A_Recoil(0.6)
        PKCF G  1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG D  0 A_JumpIfNoAmmo("AltDown8")
        PKCG D  0 A_JumpIfInventory("AltFired", 1, "AltUp10")
        goto AltUp8

      AltUp10:
        PKCG A  0
        PKCG AAA 0 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A   0 A_Recoil(1)
        PKCF F   1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG CCC 0 A_FireBullets(2, 2, -1, 8, "BulletPuff")
        PKCG A   0 A_Recoil(1)
        PKCF G   1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG D   0 A_JumpIfNoAmmo("AltDown8")
        PKCG D   0 A_JumpIfInventory("AltFired", 1, "AltUp10")
        goto AltUp9

      AltDown8:
        PKCG A 1
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown7")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp8")
        goto AltDown7

      AltDown7:
        PKCG A 1
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown6")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp7")
        goto AltDown6

      AltDown6:
        PKCG A 1
        PKCG B 1
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown5")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp6")
        goto AltDown5

      AltDown5:
        PKCG A 2
        PKCG B 2
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown4")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp5")
        goto AltDown4

      AltDown4:
        PKCG A 2
        PKCG B 2
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown3")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp4")
        goto AltDown3

      AltDown3:
        PKCG A 3
        PKCG B 3
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown2")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp3")
        goto AltDown2

      AltDown2:
        PKCG A 3
        PKCG B 3
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown1")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp2")
        goto AltDown1

      AltDown1:
        PKCG A 4
        PKCG B 4
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp1")
        goto AltDown0

      AltDown0:
        PKCG A 4
        PKCG B 4
        PKCG C 4
        PKCG D 4
        goto Ready



      Flash:
        TNT1 A 0 A_Jump(128,4)
        PKCF A 2 bright A_Light2
        PKCF B 1 bright
        TNT1 A 2
        Goto LightDone
        PKCF A 2 bright A_Light1
        PKCF B 1 bright A_Light1
        TNT1 A 2 A_Light1
        Goto LightDone


      AltFlash:
        PKCF A 1 A_Light2
        goto LightDone

      Spawn:
        MGUN A -1
        Stop
    }
}


actor "Power Chaingun": DoomWeapon
{
    Weapon.SelectionOrder 700
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 1
    Weapon.AmmoGive1 80
    Weapon.AmmoType1 "Clip"
    Weapon.AmmoType2 "Clip"

    +POWERED_UP

    Weapon.SisterWeapon " Chaingun "

    Inventory.PickupMessage "$BDW_PK_CHAINGUN"
    Obituary "$BDW_MP_CHAINGUN_POWER"
    States
    {
      Ready:
        PKCG A 1 A_WeaponReady
        Loop
      Deselect:
        PKCG A 1 A_Lower
        Loop
      Select:
        PKCG A 1 A_Raise
        Loop
      Fire:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire", CHAN_WEAPON)
        PKCG A 0 A_GunFlash
        PKCG A 0 A_Recoil(0.3)
        PKCG A 1 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG BD 1
        PKCG A 1 A_Refire
        PKCG B 2 A_Weaponready
        PKCG C 3 A_Weaponready
        PKCG D 4 A_Weaponready
        Goto Ready
/*
      AltFire:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire", CHAN_WEAPON)
        PKCG A 0 A_GunFlash
        PKCG A 1 A_FireBullets(6, 6, 3, 8, "ExplosiveChaingunBulletPuff")
        PKCG BCDD 1
        PKCG A 1 A_Refire
        PKCG B 2 A_Weaponready
        PKCG C 3 A_Weaponready
        PKCG D 4 A_Weaponready
        Goto Ready
*/

      AltFire:

      AltUp0:
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A 2
        PKCG B 4
        PKCG C 4
        PKCG D 4
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp1")
        goto Ready

      AltUp1:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A 2
        PKCG B 4
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp2")
        goto AltUp0

      AltUp2:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A 1
        PKCG B 3
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown1")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp3")
        goto AltUp1

      AltUp3:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A 1
        PKCG B 3
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown2")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp4")
        goto AltUp2

      AltUp4:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG B 2
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown3")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp5")
        goto AltUp3

      AltUp5:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 2 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG B 2
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown4")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp6")
        goto AltUp4

      AltUp6:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF E 1 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCF F 1
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown5")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp7")
        goto AltUp5

      AltUp7:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 1 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown6")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp8")
        goto AltUp6

      AltUp8:
        PKCG A 0
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF F 1 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A 0 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG A 0 A_Recoil(0.3)
        PKCF G 1 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG D 0 A_JumpIfNoAmmo("AltDown7")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp9")
        goto AltUp7

      AltUp9:
        PKCG A  0
        PKCG AA 0 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A  0 A_Recoil(0.6)
        PKCF F  1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG CC 0 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A  0 A_Recoil(0.6)
        PKCF G  1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG D  0 A_JumpIfNoAmmo("AltDown8")
        PKCG D  0 A_JumpIfInventory("AltFired", 1, "AltUp10")
        goto AltUp8

      AltUp10:
        PKCG A  0
        PKCG AAA 0 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A   0 A_Recoil(1)
        PKCF F   1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG CCC 0 A_FireBullets(2, 2, -1, 8, "ExplosiveChaingunBulletPuff")
        PKCG A   0 A_Recoil(1)
        PKCF G   1 A_PlaySound("betterdoomweapons/chaingunfire")
        PKCG D   0 A_JumpIfNoAmmo("AltDown8")
        PKCG D   0 A_JumpIfInventory("AltFired", 1, "AltUp10")
        goto AltUp9

      AltDown8:
        PKCG A 1
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown7")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp8")
        goto AltDown7

      AltDown7:
        PKCG A 1
        PKCG C 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown6")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp7")
        goto AltDown6

      AltDown6:
        PKCG A 1
        PKCG B 1
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown5")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp6")
        goto AltDown5

      AltDown5:
        PKCG A 2
        PKCG B 2
        PKCG C 1
        PKCG D 1
        PKCG D 0 A_JumpIfNoAmmo("AltDown4")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp5")
        goto AltDown4

      AltDown4:
        PKCG A 2
        PKCG B 2
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown3")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp4")
        goto AltDown3

      AltDown3:
        PKCG A 3
        PKCG B 3
        PKCG C 2
        PKCG D 2
        PKCG D 0 A_JumpIfNoAmmo("AltDown2")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp3")
        goto AltDown2

      AltDown2:
        PKCG A 3
        PKCG B 3
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown1")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp2")
        goto AltDown1

      AltDown1:
        PKCG A 4
        PKCG B 4
        PKCG C 3
        PKCG D 3
        PKCG D 0 A_JumpIfNoAmmo("AltDown0")
        PKCG D 0 A_JumpIfInventory("AltFired", 1, "AltUp1")
        goto AltDown0

      AltDown0:
        PKCG A 4
        PKCG B 4
        PKCG C 4
        PKCG D 4
        goto Ready



      Flash:
        TNT1 A 0 A_Jump(128,4)
        PKCF A 2 bright A_Light2
        PKCF B 1 bright
        TNT1 A 2
        Goto LightDone
        PKCF A 2 bright A_Light1
        PKCF B 1 bright A_Light1
        TNT1 A 2 A_Light1
        Goto LightDone


      AltFlash:
        PKCF A 1 A_Light2
        goto LightDone

      Spawn:
        MGUN A -1
        Stop
    }
}


actor ExplosiveChaingunBulletPuff: BulletPuff
{
    +PUFFONACTORS
    +PUFFGETSOWNER
    Obituary "$OP_MPCHAINGUN_POWERED"
    Vspeed 0
    Decal BulletScorch
    RenderStyle Add
    Scale 0.5
    States
    {
      Spawn:
        TNT1 A 0
        TNT1 A 0
        MISL B 3 bright A_Explode(48,96, 0)

      Death:
        MISL C 6 bright
        MISL D 4 bright
        stop
    }
}
