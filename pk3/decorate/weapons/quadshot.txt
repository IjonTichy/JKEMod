actor QuadShot: Weapon
{
    Weapon.AmmoType1 "QuadShotCounter"
    Weapon.AmmoType2 "Shell"
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 4
    Weapon.AmmoGive1 1
    Weapon.AmmoGive2 16

    Weapon.SelectionOrder 1000

    +AMMO_OPTIONAL

    Inventory.PickupMessage "$JKE_PK_QUADSHOT"
    Obituary "$JKE_MP_QUADSHOT"

    States
    {
      Select:
        QSHT A 1 A_Raise
        loop
      Deselect:
        QSHT A 1 A_Lower
        loop

      Ready:
        QSHT A 1 A_WeaponReady
        loop

      Fire:
        GSHT A 0 A_JumpIfNoAmmo("AltFire")
        QSHT A 0 A_PlaySound("jkemod/quadshot/fire", CHAN_WEAPON)
        QSHT A 0 A_FireBullets(5, 5, 40, 7, "Bulletpuff", 1)
        QSHT B 3 bright A_Light2
        QSHT C 3 bright A_Light1
        QSHT A 0 A_Light0
        QSHT A 12
        goto Ready

      AltFire:
        QSHT A 0 A_JumpIfInventory("QuadShotCounter", 0, "NoLoad")
        QSHT A 0 A_JumpIfInventory("Shell", 4, 1)
        goto NoLoad

        QSHT A 0 A_PlaySound("jkemod/quadshot/load", CHAN_WEAPON)
        QSHT DE 4
        QSHT A 0 A_GiveInventory("QuadShotCounter", 1)
        QSHT A 0 A_TakeInventory("Shell", 4)
        QSHT A 16
        goto Ready

      NoLoad:
        QSHT A 1
        QSHT A 0 A_ReFire
        goto Ready


      Spawn:
        QSHT Z -1
        stop
    }
}


actor QuadShotCounter: Ammo
{
    Inventory.MaxAmount 2
    +IGNORESKILL
}
